@page "/adduser"

@using Client.Services
@using Models;

@inject PersonService PersonService
@inject NavigationManager NaviagationManager

<PageTitle>Add user</PageTitle>

<h1>Add user</h1>

<EditForm Model="@Person" OnSubmit="@Submit">
    <div class="form-group">
        <label for="LastName">Last name</label>
        <InputText @bind-Value=Person.LastName class="form-control" id="LastName"></InputText>
    </div>
    <div class="form-group">
        <label for="FirstName">First name</label>
        <InputText @bind-Value=Person.FirstName class="form-control" id="FirstName"></InputText>
    </div>
    <div class="form-group">
        <label for="BirthDate">Birthdate</label>
        <InputDate @bind-Value=Person.BirthDate class="form-control" id="BirthDate"></InputDate>
    </div>
    <input type="submit" class="btn btn-primary" value="Save" />
</EditForm>


@code {
    Person Person = new();

    async Task Submit(EditContext editContext)
    {
        await PersonService.SaveNewPerson(Person);
        NaviagationManager.NavigateTo("/");
    }
}
